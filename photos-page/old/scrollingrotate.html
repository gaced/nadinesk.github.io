<!DOCTYPE html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>

<style>

body {
    background: #BDEC8E;
    color: #F49EFF;
    margin: 20px;
    padding: 0px;
}

#cog {
    background: url('photos/05.25.13.jpg');
    background-size: cover;
    border-radius: 2px;
    width: 800px;
    height: 602px;
    margin-left: auto;
    margin-right: auto;
    margin-top: 200px;
    transform: rotate(10deg);
    transform-origin: top left;
    transition: all 1s;
    

}

#cog2 {
    background: url('photos/06.17.13.jpg');
    background-size: cover;
    border-radius: 10px;
    width: 800px;
    height: 602px;
    margin-left: auto;
    margin-right: auto;
    margin-top: 80px;
    
    left: 20px;
    transform: rotate(-10deg);
    transform-origin: top right;
    transition: all 1s;
    
}

</style>




</head>

<body>
    <div id="cog" class="blah">
        
    </div>
    <div id="cog2">2</div>


<script>
var angle = 3;
var $cog = $('#cog')
var $cog2 = $('#cog2')
var scrollTop =$(window).scrollTop(), 
    elementOffset = $(".blah").offset().top, 
    elementOffset2 = $("#cog2").offset().top, 
    distance1 = ((elementOffset - scrollTop)/$(window).height()) * 100;
    distance2 = ((elementOffset2 - scrollTop)/$(window).height()) * 100;


$(window).scroll(function () {
var scrollTop =$(window).scrollTop(), 
    elementOffset = $(".blah").offset().top, 
    distance = ((elementOffset - scrollTop)/$(window).height()) * 100;

    elementOffsetTwo = $("#cog2").offset().top, 
    distanceTwo = ((elementOffsetTwo - scrollTop)/$(window).height()) * 100;

    console.log("distance", distance);
    console.log("distance1", distance1);
    console.log("distanceTwo", distanceTwo);
    console.log("distance2", distance2);
    
    if (distance+1 < distance1)
    {
         $cog.css({
                'transform': 'rotate('  + 0 +  'deg)'
            });
               $cog.css({
                'transform-origin': 'top left'
            });

    }

        if (distance > (distance1-3))
    {
        $cog.css({
                'transform': 'rotate('  + 10 +  'deg)'
            });
        $cog.css({
                'transform-origin': 'top left'
            });
    }

    if (distanceTwo+1 < distance2)
    {
         $cog2.css({
                'transform': 'rotate('  + 0 +  'deg)'
            });
               $cog2.css({
                'transform-origin': 'top right'
            });

    }

        if (distanceTwo > (distance2-5))
    {
        $cog2.css({
                'transform': 'rotate('  + -10 +  'deg)'
            });
        $cog2.css({
                'transform-origin': 'top right'
            });
    }

    
    });


/*
function getRotationDegrees(obj) {
    var matrix = obj.css("-webkit-transform") ||
    obj.css("-moz-transform")    ||
    obj.css("-ms-transform")     ||
    obj.css("-o-transform")      ||
    obj.css("transform");
    if(matrix !== 'none') {
        var values = matrix.split('(')[1].split(')')[0].split(',');
        var a = values[0];
        var b = values[1];
        var angle = Math.round(Math.atan2(b, a) * (180/Math.PI));
    } else { var angle = 0; }
    return (angle < 0) ? angle + 360 : angle;
}




var $cog = $('#cog'),
    $cog2 = $('#cog2'),
    $body = $(document.body),
    $cogZero = ($body.scrollTop());
    bodyHeight = $body.height();


$(window).scroll(function () {
    angle1 = getRotationDegrees($('#cog'));
    angle2 = getRotationDegrees($('#cog2'));
    $cogZero = ($body.scrollTop());
    if ($cogZero <= $body.height())
    {

        if (((angle1>=0) && (angle1 <= 10))  || ((angle2>=-5) && (angle2 <= 0))) 
        {
            $cog.css({
                'transform': 'rotate('  + $cogZero/40 +  'deg)'
            });
            $cog2.css({
                'transform': 'rotate('   + (-$cogZero/50) +  'deg)'
            });
        }
        if ((angle1>=1) || (angle2 >=1))
        {
            $cog.css({
                'transform': 'rotate(' + $cogZero/40   + 'deg)'
            });
            $cog2.css({
                'transform': 'rotate(' +  -$cogZero/50   + 'deg)'
            });
        }



    }
                     

    
    
    console.log($cogZero);

    $cog.text( "scrollTop:" + $body.scrollTop() ); 
    $cog2.text( "scrollTop:" + $cog.scrollTop() );

    
});*/


</script>
</body>



</html>