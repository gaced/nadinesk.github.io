<!DOCTYPE html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>

<style>

body {
    background: #BDEC8E;
    color: #F49EFF;
    margin: 20px;   
    padding: 0px;
}



#photo-1-month {
    margin-left: auto;
    margin-right: auto;
    font-style: Helvetica sans-serif;
}

#cog {
    border-radius: 2px;
    background: url('photos/05.25.13.jpg');
    background-size: cover;
    width: 550px;
    height: 414px;
    margin-top: 200px;
    margin-left: auto;
    margin-right: auto;
    transform: rotate(0deg);
    transform-origin: top left;
    transition: 1s easeInQuint;    

}

.flipped {
    opacity: 0.5;
    
    transition: 1s ease;
}

#cog2 {
    background: url('photos/06.17.13.JPG');
    background-size: cover;
    border-radius: 2px;
    width: 550px;
    height: 414px;
    margin-top: 30px;
    margin-left: auto;
    margin-right: auto;
    transform: rotate(0deg);
    transform-origin: top right;
    transition: 0.5s easeInQuint;
}


#cog3 {
    background: url('photos/07.25.13.JPG');
    background-size: cover;
    border-radius: 2px;
    width: 550px;
    height: 414px;
    margin-top: 30px;
    margin-left: auto;
    margin-right: auto;
    transform: rotate(0deg);
    transform-origin: top left;
    
    margin-bottom: 100px;
    transition: 0.5s easeInQuint;
/*    transition-duration: 0.5s;
    transition-timing-function: step-end; */
}

#cog4 {
    background: url('photos/08.24.13.JPG');
    background-size: cover;
    border-radius: 2px;
    width: 550px;
    height: 414px;
    margin-top: 30px;
    margin-left: auto;
    margin-right: auto;
    transform: rotate(-5deg);
    transform-origin: top left;
    transition: 0.5s easeInQuint;
    margin-bottom: 100px;
/*    transition-duration: 0.5s;
    transition-timing-function: step-end; */
}



</style>




</head>

<body>
    
        <div id="cog"></div>

    
    <div id="cog2"></div>
    <div id="cog3"></div>
    <div id="cog4"></div>
</div>

<script>

(function($){

    /**
     * Copyright 2012, Digital Fusion
     * Licensed under the MIT license.
     * http://teamdf.com/jquery-plugins/license/
     *
     * @author Sam Sehnert
     * @desc A small plugin that checks whether elements are within
     *       the user visible viewport of a web browser.
     *       only accounts for vertical position, not horizontal.
     */
    $.fn.visible = function(partial){
        
        var $t              = $(this),
            $w              = $(window),
            viewTop         = $w.scrollTop(),
            viewBottom      = viewTop + $w.height(),
            _top            = $t.offset().top,
            _bottom         = _top + $t.height(),
            compareTop      = partial === true ? _bottom : _top,
            compareBottom   = partial === true ? _top : _bottom;
        
        return ((compareBottom <= viewBottom) && (compareTop >= viewTop));
    };
    
})(jQuery);

$(document).ready(function(){
     $(this).scrollTop(0);
var $cog = $('#cog');
var $cog2 = $('#cog2');
var $cog3 = $('#cog3');
var $cog4 = $('#cog4');

var scrollTop =$(window).scrollTop();

var cog1Offset = $("#cog").offset().top;
var cog2Offset = $("#cog2").offset().top;
var cog3Offset = $("#cog3").offset().top;
var cog4Offset = $("#cog4").offset().top;

/*var distanceOneInit = ((cog1Offset - scrollTop)/$(window).height()) * 100;
var distanceTwoInit = ((cog2Offset - scrollTop)/$(window).height()) * 100;
var distanceThreeInit = ((cog3Offset - scrollTop)/$(window).height()) * 100;
var distanceFourInit = ((cog4Offset - scrollTop)/$(window).height()) * 100; */

$(window).scroll(function () {
    var scrollTopMove =$(window).scrollTop();

    var cog1MovingOffset = $("#cog").offset().top - scrollTopMove;
    var cog2MovingOffset = $("#cog2").offset().top - scrollTopMove;
    var cog3MovingOffset = $("#cog3").offset().top - scrollTopMove;
    var cog4MovingOffset = $("#cog4").offset().top - scrollTopMove;
    var win = $(window).height(); 

   /* var distanceOneMove = ((cog1MovingOffset - scrollTop)/$(window).height()) * 100;
    var distanceTwoMove = ((cog2MovingOffset - scrollTop)/$(window).height()) * 100;
    var distanceThreeMove = ((cog3MovingOffset - scrollTop)/$(window).height()) * 100;
    var distanceFourMove = ((cog4MovingOffset - scrollTop)/$(window).height()) * 100; */
            
    /*console.log("static1", cog1Offset);
    console.log("movin1",cog1MovingOffset); */
    console.log("static2", cog2Offset);
    console.log("movin2",cog2MovingOffset);
    console.log("static offset", $("#cog2").offset().top);
    /*console.log("static3", cog3Offset);
    console.log("movin3",cog3MovingOffset);*/
    console.log("scrolltop", scrollTopMove); 
    console.log("win height", win);
    /*console.log("static4", cog4Offset);
    console.log("movin4",cog4MovingOffset);*/
    
    if ($(cog).visible(true))
    {
         $cog.css({
                'transform': 'rotate('  + 5 +  'deg)'
            });
        $cog.css({
                'transform-origin': 'top left'
            });
    }

    if ($(cog).visible(false))
    {
         $cog.css({
                'transform': 'rotate('  + 0 +  'deg)'
            });
        $cog.css({
                'transform-origin': 'top left'
            });
    }

  

    if ($(cog2).visible(true))
    {
         $cog2.css({
                'transform': 'rotate('  + -5 +  'deg)'
            });
        $cog2.css({
                'transform-origin': 'top right'
            });
    }

    if ($(cog2).visible(false))
    {
         $cog2.css({
                'transform': 'rotate('  + 0 +  'deg)'
            });
            
        $cog2.css({
                'transform-origin': 'top right'
            });
        
    }

    if ($(cog3).visible(true))
    {
         $cog3.css({
                'transform': 'rotate('  + 5 +  'deg)'
            });
        $cog3.css({
                'transform-origin': 'top left'
            });
    }

        if ($(cog3).visible(false))
    {
         $cog3.css({
                'transform': 'rotate('  + 0 +  'deg)'
            });
            
        $cog3.css({
                'transform-origin': 'top left'
            });
        
    }

        if ($(cog4).visible(true))
    {
         $cog4.css({
                'transform': 'rotate('  + -5 +  'deg)'
            });
        $cog4.css({
                'transform-origin': 'top right'
            });
    }

       if ($(cog4).visible(false))/*if (cog4MovingOffset > (cog4Offset/2)) || ($(window).scrollTop() + $(window).height() > $(document).height() - 100)) */
    {
         $cog4.css({
                'transform': 'rotate('  + 0 +  'deg)'
            });
            
        $cog4.css({
                'transform-origin': 'top right'
            });
        
    }




    
    });


$($cog).click(function(){
    $(this).toggleClass("flipped");
    

});

});






</script>
</body>



</html>